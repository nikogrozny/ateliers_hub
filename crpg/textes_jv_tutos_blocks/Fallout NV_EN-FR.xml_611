road script that makes ed e move to the first warhead and bark a line at the end result of the given ai package j s begin player is hired when players enter this trigger if road if the start area in road has not registered yet that the warhead has been found set road to we update the s variable and force an ai package to that makes him travel to the warhead and bark a line disable we disable and mark for delete this trigger volume else if the warhead has already been found by other means we disable and mark for delete this trigger disable end
road this script runs the intro scene for road the first warhead reveal and any other events that need code for the early parts of road it also controls the enabled state of spawns in the first half of road j s short binit initial operations that run once short s been moved into position when coming from silo short with ulysses via has been initiated short first warhead is found right outside the silo s bunker short if player s hanging out near the start area short hq s spawns are active short enc s spawns are active short spawns are active and will be after three days from the last time in which their encounter flag was set to active and enc int int float float holds value of game day at which encounters are set to contrasted to begin player this event cannot occur by players crossing this trigger because it s outside the game space instead it s called by other scripts or this script itself in the event that we want to clean up the waves of encounters for performance reasons hq s spawns are active then we disable them and return the var to road ref disable road ref disable set to end begin the is disabled skip all code return else if the is enabled continue if binit init check we artificially reduce the first two marked men s perception to aid in initial stealth approach to hq road ref perception road ref perception we move into the correct spot set to we set the pertinent to set to set to set binit to return else if in we re going to check for being moved properly and then run a timer and player pos check if we do this to prevent players from missing s ulysses if they rush ahead right after arriving to road if player x the timer leaves some time to check out the new arend makes it feel more natural road set to this ai package makes start with the ulysses cut set to set to return else set to else just in case that s not moved yet we put it in place to be damn sure return these states are here in case we want to add some scripted events at the start of road right after ulysses set to return set to return else set to if set to return else set to set to set to set to return we pass to for now which enables hq s guards if is it will only be when players have explored near hq s encounters are deactivated we ll run distance checks to see if they need to be activated again if player road if road ref enable set to return road ref enable set to if road ref road player if we activated hq s spawns we make sure to deactivate those handled by road s middle area and set to we set the hq encounter var to active spawns set to set to return if enc as with the hq spawns we do the same with s guards if player road if road scout ref enable set to return road guard ref enable set to if road scout ref road player set enc to set to set to return if player road road ref resurrect road ref resurrect road scout ref resurrect set to end
silo this script runs the level s initial setup and also handles the sequence of events at the level s finale a houses the script in silo j s short binit initial operations that run once short silo doors to road are open and alarm is likely triggered short has used the security codes to activate the mainframe for player use short alarm goes off it s possible to open the silo without triggering the alarm short turrets have been repaired short turrets have been hacked short sentries have been hacked short sentry doors opened short disabled second floor robot has been disabled short used as a toggle for the on off effect of the silo s mainframe light int all aggressive turrets off turrets friendly all bots off int operational integer int operational integer defines larger segments than float timer float float stores the time at which the silo s doors open to cancel alarm after a few days hours begin player silo bot disable this block simply removes initial spawns in level silo and enables the post marker enable parent of new spawns silo bot disable silo bot disable silo bot disable silo floor bot ref disable silo floor bot ref disable silo enable end begin the is disabled skip code return else run code is is enabled if binit run initial operations silo bot here we set silo s bots to restrained dead ghost unconscious and their aggression to silo bot silo bot silo bot silo bot kill silo bot kill silo bot kill silo bot kill silo bot silo bot silo bot silo bot silo floor bot ref perception this bot s perception is artificially lowered to help with stealth actions against it silo bot silo bot silo bot silo bot silo bot aggression silo bot aggression silo bot aggression silo bot aggression silo floor turret ref here we set the silo s turrets to ghost and destroyed to prevent interaction until alarm sequence silo floor turret ref silo floor turret ref silo floor turret ref silo floor turret ref silo floor turret ref silo floor turret ref kill this turret is destroyed by default silo floor turret ref x silo floor turret ref y silo floor turret ref z left we force the silo s reveal console to appear off no red light silo ref kill we force this bot to die for aesthetics although it s not strictly necessary already dead in editor set binit to return else if initial operations are done we begin checking for the order of events within silo if preliminary field left open in case we want to script scenes before the alarm scene preliminary field left open in case we want to script scenes before the alarm scene if silo disable set to set to return else set to else if silo enable set to set to return else set to this value gets set once players use the mainframe to open the silo s doors if this value gets set once players use the mainframe to open the silo s doors players have disabled the alarm we activate turrets setting them to friendly and unlock the main door silo silo floor turret ref silo floor turret ref silo floor turret ref silo floor turret ref silo floor turret ref silo floor turret ref silo unlock set to set to set to we jump to state which corresponds to silo s been opened and alarm sequence finished return else if alarm is active when opening the silo s doors to road one second delay to activate alarm markers light marker and bring the bots back to life silo ref enable silo ref enable silo enable if silo bot resurrect silo bot resurrect silo bot silo bot silo bot silo bot silo bot silo bot silo bot aggression silo bot aggression silo bot disable silo bot disable if silo ref forward silo ref forward set to silo bot resurrect silo bot resurrect silo bot silo bot silo bot silo bot silo bot silo bot silo bot aggression silo bot aggression silo bot disable silo bot disable silo sentry unlock silo sentry silo bots unlock silo floor turret ref silo silo floor turret ref silo silo floor turret ref silo set to set to return else set to silo bot silo bot enable return silo bot silo bot enable return silo bot silo bot enable return silo bot silo bot enable return else set to return else if silo bot silo bot enable return silo bot silo bot enable return else set to return we move bot a into position if if silo disable silo bot silo set to return else set to legacy step in case we want to make the lights flicker on off during the alarm enable disable alarm marker if silo enable set to set to return else set to we move bot into position if silo disable if silo bot silo set to set to return else set to we give ai to bots so that they rush into the mainframe s room and we set turrets to active if silo enable if silo bot bots silo bot bots move attack silo bot bots silo bot bots move attack silo floor turret ref silo floor turret ref silo floor turret ref silo floor turret ref silo floor turret ref silo floor turret ref silo floor turret ref silo floor turret ref silo floor turret ref silo silo floor turret ref silo silo floor turret ref silo silo floor turret ref silo if silo silo unlock doors to road get unlocked here silo set to set to set to we jump to state which corresponds to silo s been opened and alarm sequence finished return else set to we check for from the moment players open the silo s doors if three days pass since this time we disable alarm if set to set to return if if silo ref disable silo ref disable silo disable end
enables tunnelers and starts their combat dm float int begin player set to set to end simple delay here set to return ref enable ref enable set to return set to return disable disable set to disable set to end
disables linked group of dudes dm dm added ref begin player set to disable disable end
silo script to handle the scripted scene where opens access to the animated window reveal of the missile in s missile silo interior j s added ed e energy blast to power up sequence changed ed e s weapon used short player just crossed a trigger near the console used to open the silo s reveal doors short has awaken power at the silo and moves aside to let players use the console that reveals the silo s shaft short the doors to the silo s shaft have opened and the reveal has taken place short maintenance bot has been enabled short toggle var to control the blinking of lights on off during s silo sequence int operational variable for large sequences int operational variable for precise timings float timer float begin is disabled skip reading script return else if is enabled continue with script trigger to make the silo has been crossed player crossed if state runs s approach to the silo reveal doors console if silo ref we give an ai package to approach the console set to return this state controls events during s movement toward the console if say barks once positive beep set to return if has barked and if it s close to its console destination marker we ll play a sound once if silo ref forward set to return if backward set to set to return else set to we let four seconds pass from the moment that s near the console then we play a sound and move to state if d set to set to set to return else set to if s just started to power up the silo sound started to play above set to we set a timer to control the blinking of lights during the sequence if disable this light is the red blinking light above the console synched to whenever the console plays its silo enable this marker is the parent of all lights and light fixtures involved in the blinking a set to return silo disable set to return silo enable set to return silo disable set to return left forward set to silo enable set to return silo disable set to return silo enable set to return silo disable set to return silo enable set to return silo unlock enable backward set to set silo to set to set to set to return if set to set to return else set to if set to set to return else set to else if if silo ref silo ref silo ref say set to set to return else set to else right disable set to set to return else set to else if enable set to set to return else set to if set to set to return else set to if silo unlock silo a set to set to disable return else set to end
ed e bark for scared emotions j s increased the max distance after which will no longer bark when players cross this trigger from to begin player if player say disable end
ed e bark for excited emotions j s increased the max distance after which will no longer bark when players cross this trigger from to begin player if player say disable end
ed e bark for sad emotions j s increased the max distance after which will no longer bark when players cross this trigger from to begin player if player say disable end
ed e bark for happy emotions j s increased the max distance after which will no longer bark when players cross this trigger from to begin player if player say disable end
road scout enables a marked men upon crossing its associated trigger j s short marked men in has been enabled begin player if road enc if not triggered yet and hasn t been found road scout ref enable we enable its scout say and we make bark in worry about the danger ahead set road enc to we update the start area of road with the appropriate value for s encounters set to we mark as complete then disable and mark for deletion the trigger volume disable end
road enables a marked men upon crossing its associated trigger j s j s added new call to update a var to control quest target about a month ago i greatly expanded this script to control the red glare reveal scene but didn t add comments on these changes because they completely re structured the script short marked men marauder in has been enabled marked men hunter in has been enabled float begin player if if not triggered yet road guard ref enable we enable a guard in road hunter ref road hunter ref road hunter ref set to set the var to then disable and mark for deletion the trigger volume set road box to return end road hunter ref we set ambush guard in to ghost and give him the red glare weapon road hunter ref explosives road hunter ref perception road hunter ref strenh set to set the var to then disable and mark for deletion the trigger volume return if player z if player y if player x road hunter ref enable we enable a guard in set to return road hunter ref set to return road hunter ref road hunter ref road hunter ref rocket road hunter ref road hunter ref road hunter ref set to return set to if road hunter ref player road hunter ref road hunter ref set to set to set to if road hunter ref player if road hunter ref road hunter ref set to set to return road hunter ref road hunter ref disable set to return if road hunter ref player road hunter ref road ref road hunter ref road hunter ref set to return road hunter ref set to return disable end
road script to handle timing of extra explosions ai behaviors barks or any other event that needs to occur when players acquire the sonic detonator from mm j s j s added var and code associated to triggers that turn this var to this is done for better framing of flares ambush after players get the detonator j s added var short variable used for the laser detonator quest targets updated through trigger that starts the red glare reveal scene short variable to control important one shot event short variable to account for the laser detonator being picked up by players int variable to control the scene s states int variable to assist in each of the scene s states to flow in proper timing frames float variable used for counters ref var to grab reference of flying cars ref var to grab reference of flying cars begin player this event is called out by other scripts players can t physically reach this trigger it serves to clean up the spawned dudes to reduce actor count when necessary we run checks to see if the actors can be safely disabled to avoid vanishing them in front of players view if road rush ref road rush ref road rush ref player road rush ref disable if road rush ref road rush ref road rush ref player road rush ref disable if road rush ref road rush ref road rush ref player road rush ref disable if road rush ref road rush ref road rush ref player road rush ref disable if road rush ref road rush ref road rush ref player road rush ref disable if road hunter ref road hunter ref road hunter ref player road hunter ref disable end return to prevent the script from running if we disable the that houses it else if before players acquire the sonic detonator we may want to do some stuff in this area say but if players just got the sonic detonator we make happy and we tell other to their encounters road player road player set to set to return else if player set to if set to return for when players have acquired the sonic detonator we may want to do some things in this area before players blow it up set to we run a timer and enable the enemies in several steps for better timing if road rush ref enable we enable the first dude and also fire up a flare effect we repeat this step below for scene setting purposes road ref set to return road rush ref enable set to return if say if s not in combat yet we make it bark a worried line road rush ref enable road ref set to return road rush ref enable road ref set to set to return if road rush ref enable set to set to set to once we re done with all spawns we set the to and reset all operational return for when players are facing the boss of road before destroying the exit barricade bridge road ref if the barrier out of is destroyed we ll make bark a happy line below after a second timer if ref silo we re enable fast traveling which was disabled in the road set to set to return else set to if ref set to set to return else set to if disable set to set to return else set to if ref set to set to return else set to if ref disable set to set to return else set to if say set to set to set to we move the code to return else set to we may use and but the bridge s explosion has already been handled in the in this state the bridge has been just blown up we re going to use three steps to liven up the event explosions baby state handles the aftermath of the bridge s explosion primarily dealing with ai in the area or end
kills the player if they fall off the intro building dm dm changed to an essential death reload from a kill volume dm changed it back to a kill volume because essential death reload just crashes the system trigger now kills non player non references changed the call to not the player to avoid kill cams short ref used to track who entered the trigger player player kill set to player else set to if end
enables linked group of dudes dm dm added ref begin player set to enable disable end
launches a flare from the linked ref dm dm added ref begin player set to disable end
launches flares when the player enters the trigger dm short launch flares can launch int increments which flare can go off float timer delay begin player set launch to end launch set to launch set to launch set to launch set to launch set to end
silo script to handle opening the exit out of the silo it also triggers the event where bots respond to the alarms and swarm the player its levels of interactivity are almost fully fleshed out j s moved scripting to for ed e s zap added animated button added call added objective for player to use mainframe fixing scripting to prevent player being told he needs the codes if he has them j s added call to move near the activator only if s z position is below the first floor of the silo short the silo has been opened short has activated this mainframe short msg box to warn about mainframe s functions has been shown so we ll use a non box msg for any next interactions if has not yet unlocked the mainframe int show messages if has not unlocked the mainframe show messages if has unlocked the mainframe shows message to ask ed e to unlock terminal int all aggressive turrets off turrets friendly all bots off int value corresponds with button pressed as defined in the msg entities used int operational states int operational counter float timer float player if player is the activator agent if silo box check for having unlocked the mainframe if silo box if has unlocked the mainframe we check to see if players have already opened the silo silo display message that allows opening the silo set to return else silo we display a different message if the silo s been already opened return else if hasn t unlocked the mainframe if silo if check to display a message box for the first time silo set to set to return else if the warning sign message box has been displayed then display upper corner variant does not stop silo return else silo set to end silo box check to see if the mainframe hasn t been unlocked by already if player silo check to make sure the player has the security codes silo enable the mainframe light turns on its blinking effect is scripted in the silo box silo display a message warning corner field about s feat set silo box to set var to silo left set silo box to we move the scripted scene s to state in case we want to run any scene at this point a end begin this block will only run when is greater than only happens if players have had a message displayed on activation of mainframe if the following message is just a warning only option is to exit back to normal game mode set to if set to a return this message allows opening the silo s doors button set to if set to return if players choose to open the silo s doors check to see if they haven t been opened yet if silo box if doors are still closed then we update the silo s scripted scene s variables to make it run its silo opening alarm scene forward set to silo disable the mainframe light turns off set silo box to silo s doors will be recognized as open according to silo s set silo box to silo s moves to state alarm silo door opening state a set to if set to return if z silo say barks congratulatory note and receives package to activate the mainframe goes to the mainframe activates it silo forward end
silo floor this script awakens the second floor sentry bot upon crossing its associated trigger j s short bot enabled and trigger is now ready for deletion begin player if simple check to enable the robot of silo s second floor we keep it disabled to help performance and aggro when players are turning the silo s power back on bottom level silo floor bot ref enable set to disable end
script script for ulysses third greeting through ed e added timer moved quest incrementing here removed timer and added package for ed e to fire his greeting added a faction call before the dialogue starts to make sure the current faction is correct checking rep thresh not baseline rep since faction scaling is different than the adjectives fixing rep thresh checks to fix the all reps zero error short begin player updating the faction checks in case the player returned to and came back set to set to set to if set to set to legion set to house else set to none of the above disable end