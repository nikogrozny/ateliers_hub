this script handles all of the hiring logic for the companions in short added for achievement scripting only fires once per companion usage to hire a companion just activate with that companion ex activate ref begin set to set the new follower s reference behaviors do character specific stuff if set dean s follower quest variables set followers to set followers to add dean s perk and show a message about it player adjust quest delay for dean s barks make companion gala quest active if available and incomplete if b set christine s follower quest variables set followers to set followers to add christine s perk and show a message about it player make companion gala quest active if available and incomplete if c set dog s follower quest variables set followers to set followers to add dog s fake god s perk message if dog add from debug remove message describes that dog will eat ghost people dog was hired first from cage set variable to perk removal messages will show up correctly if set to set to player god add from debug remove make companion gala quest active if available and incomplete if a set flag to show the player has a companion set followers to set the ref var in the follower s quest to the new follower set followers to end
dean s int int int int int int christine s int int int int int dog s int int int int int general int veronica state tracking for elijah reactivity short reference to current teammate ref since we typically had to add a bunch fo script to handle companions in places in it s hoped we can use this var to consolidate such things how to use when a companion is added we set this ref to point to them when the player fires a companion we set this ref to when referring to the player s current companion for the purpose of teleporting them somewhere for instance use this ref if it s non zero instead of checking for each possible companion
note dean s editor id dean int int int int int int waiting dean is currently chatting with another short list of variables s theater debugging short end of variables for dean s theater debugging jorge player collar detonation in progress short b if followers set followers to set followers to set followers to player set flag so we can easily check if dean is dead set followers to show a message to let the player know dean died in case it s not obvious but only if the player has met dean if set the ref so that the collar detonates because one of the main characters died set to if dean dies in the theater the player can survive by making it to another area if theater set to set to added to prevent the collar from blowing players up in the theater without enough time to leave if the theater s code box state is jorge added for challenge loose ends player player added in case player murders dean after rescuing him ref say set for bomb collar countdown set to set to set to show message about collar beginning death beep sequence if the player s alive if end start of dean s theater debugging begin player is attempting to pickpocket dean if player player gala event hasn t fired and dean isn t hired so dean automatically notices and says something if followers say greeting return else activate dean is talking to another so he won t talk to the player if return if player used as failsafe in case players loot dean before getting scripting updated in the theater jorge set to return activate else activate end using to heal limb damage now so that companions are never crippled end copied over from followers changed to no other changes if player attacks dean before he s been recruited elijah sets off the collar begin player if followers followers if theater player say player now instantly dies if he attacks a companion player player obsolete player could make an resulting in unavoidable death if he used that save set to set to set to set to set to player end adding in post combat health end
script to handle christine s malfunctioning auto doc player player forward disable end
short begin player if ref enable ref enable ref enable set to set to set to set to set to set to disable set to end
short set to if christine likes the player before final suites encounter hated short move to starlet s bed for surgery voice restored by player in the suites short incremented when player reaches various points in the suites so christine can bark and player short christine is asked to tell security to shut down she s waiting at the suite for the she s in transit to the vault elevator she spoke the vault unlocked short set to when christine is ready for surgery to enable script on christine to start surgery short set to after initial conversation in the starlet s suite short christine s attitude towards player like somewhat like neutral ambivalent dislike hate whether or not christine has been freed from the auto doc short act to allow for speech to change fight if succeed christine won t use collar in boss fight short
ref begin player player entered trigger set to enable disable end
begin player if disable end
script jorge short int ref begin set to set to effect off at start if set to return end set to return if set to return if set to else if set to end begin set to if set to effect off at end end
script to control the holograms behaviors and ai detection that works in tandem with an emitter a terminal and up to three hologram actors jorge hologram reference variables ref box ref hologram states variables short hologram radius and timer variables float float float float float level specific patrol variables short begin code begin set to this is the value that different timers will use modifying its base setting depending on function set to this is the range at which holograms will begin their detection routines against intruders player currently set box to we use this reference in order to start the chain of checks we thus make a universal template for all hologram setups set to box assign proper refs to the holograms linked to whichever code box may use this script hologram a is not disabled then check for its threat states if make hologram a use the appropriate color coded shader depending on its threat state set to set to assign hologram ref to whatever is linked to hologram a whatever is linked does belong to the hologram faction hologram is not disabled then check for its threat states if make hologram use the appropriate color coded shader depending on its threat state set to set to assign hologram ref to whatever is linked to hologram whatever is linked does belong to the hologram faction hologram is not disabled then check for its threat states if make hologram use the appropriate color coded shader depending on its threat state set to set to by default hologram patrol variables are set to these can change according to individual level needs set to set to end begin set to end begin player if handle event of player disabling a hologram emitter make hologram turn to next threat level shader red player hologram ttacks set to timer value for hologram to step down back to yellow from red set to up the threat level variable for this hologram else disable if is hologram a should be disabled anyway else set to if hologram a is disabled set and to set to this can only happen in this block if an emitter has started the event make hologram turn to next threat level shader red player hologram attacks set to timer value for hologram to step down back to yellow from red set to up the threat level variable for this hologram else disable if is hologram a should be disabled anyway else set to if hologram is disabled set and to set to this can only happen in this block if an emitter has started the event make hologram turn to next threat level shader red player hologram attacks set to timer value for hologram to step down back to yellow from red set to up the threat level variable for this hologram else disable if is hologram a should be disabled anyway else set to if hologram is disabled set and to set to this can only happen in this block if an emitter has started the event set to set the quest variable that tracks disabling hologram emitters back to handle event of player crossing a hologram stop trigger hologram a is active hologram a is in aggressive state make hologram lose its previous shader red make hologram step its threat level down red to yellow make hologram stop fighting player for now make hologram stop on the spot look player force hologram to look at player set to timer value for hologram to go back to normal if players keep their distance set to set the threat level back to warned hologram is active hologram is in aggressive state make hologram lose its previous shader red make hologram step its threat level down red to yellow make hologram stop fighting player for now make hologram stop on the spot look player force hologram to look at player set to timer value for hologram to go back to normal if players keep their distance set to set the threat level back to warned hologram is active hologram is in aggressive state make hologram lose its previous shader red make hologram step its threat level down red to yellow make hologram stop fighting player for now make hologram stop on the spot look player force hologram to look at player set to timer value for hologram to go back to normal if players keep their distance set to set the threat level back to warned set to set the quest variable that tracks crossings of hologram stop triggers back to end hologram a is functional on if hologram a is at blue threat level if player player if hologram a s distance to player is too close then set the timer from yellow to red at half value if player if hologram a has direct line of sight to the player make hologram lose its previous shader blue make hologram turn to next threat level shader yellow cast a spell that handles warned state behaviors stop face player play animations and receive ai packages set to timer value for hologram to go back to normal if players keep their distance set to up the threat level variable for this hologram return player if hologram a s distance to player is enough to switch threat level if player if hologram a has direct line of sight to the player make hologram lose its previous shader blue make hologram turn to next threat level shader yellow cast a spell that handles warned state behaviors stop face player play animations and receive ai packages set to timer value for hologram to go back to normal if players keep their distance set to up the threat level variable for this hologram return else set to if hologram a is at yellow threat level if if player if player if hologram a has direct line of sight to the player make hologram lose its previous shader yellow make hologram turn to next threat level shader red get rid of spell effect where we establish hologram behaviors while in alerted state d player hologram ttacks set to timer value for hologram to step down back to yellow from red increment a challenge related variable set to up the threat level variable for this hologram return else make hologram lose its previous shader yellow make hologram step its threat level down yellow to blue player make hologram stop looking at player make hologram reset its ai so that it continues its patrols alternatively add packages through terminals etc set to set the threat level back to normal return else make hologram lose its previous shader yellow make hologram step its threat level down yellow to blue player make hologram stop looking at player make hologram reset its ai so that it continues its patrols alternatively add packages through terminals etc set to set the threat level back to normal return else set to set the threat timer to countdown from value established above in if player player if hologram a s distance to player is too close despite timer if player if hologram a has direct line of sight to the player make hologram lose its previous shader yellow make hologram turn to next threat level shader red get rid of spell effect where we establish hologram behaviors while in alerted state d player hologram ttacks set to timer value for hologram to step down back to yellow from red increment a challenge related variable set to up the threat level variable for this hologram return else set to if if player if player if hologram a has direct line of sight to the player player hologram a continues attacking set to timer value for hologram to step down back to yellow from red after chasing players around return else make hologram lose its previous shader red make hologram step its threat level down red to yellow make hologram stop fighting player for now make hologram stop on the spot look player force hologram to look at player set to timer value for hologram to go back to normal if players keep their distance set to set the threat level back to warned return else make hologram lose its previous shader red make hologram step its threat level down red to yellow make hologram stop fighting player for now make hologram stop on the spot look player force hologram to look at player set to timer value for hologram to go back to normal if players keep their distance set to set the threat level back to warned return else set to set the threat timer to countdown from value established above in set to if hologram is functional on if hologram is at blue threat level if player player if hologram s distance to player is too close then set the timer from yellow to red at half value if player if hologram has direct line of sight to the player make hologram lose its previous shader blue make hologram turn to next threat level shader yellow cast a spell that handles warned state behaviors stop face player play animations and receive ai packages set to timer value for hologram to go back to normal if players keep their distance set to up the threat level variable for this hologram return player if hologram s distance to player is enough to switch threat level if player if hologram has direct line of sight to the player make hologram lose its previous shader blue make hologram turn to next threat level shader yellow cast a spell that handles warned state behaviors stop face player play animations and receive ai packages set to timer value for hologram to go back to normal if players keep their distance set to up the threat level variable for this hologram return else set to if hologram is at yellow threat level if if player if player if hologram has direct line of sight to the player make hologram lose its previous shader yellow make hologram turn to next threat level shader red get rid of spell effect where we establish hologram behaviors while in alerted state force ai packages out to make a seamless transition to combat d player hologram attacks set to timer value for hologram to step down back to yellow from red increment a challenge related variable set to up the threat level variable for this hologram return else make hologram lose its previous shader yellow make hologram step its threat level down yellow to blue player make hologram stop looking at player make hologram reset its ai so that it continues its patrols alternatively add packages through terminals etc set to set the threat level back to normal return else make hologram lose its previous shader yellow make hologram step its threat level down yellow to blue player make hologram stop looking at player make hologram reset its ai so that it continues its patrols alternatively add packages through terminals etc set to set the threat level back to normal return else set to set the threat timer to countdown from value established above in if player player if hologram s distance to player is too close despite timer if player if hologram has direct line of sight to the player make hologram lose its previous shader yellow make hologram turn to next threat level shader red get rid of spell effect where we establish hologram behaviors while in alerted state force ai packages out to make a seamless transition to combat d player hologram attacks set to timer value for hologram to step down back to yellow from red increment a challenge related variable set to up the threat level variable for this hologram return else set to if if player if player if hologram has direct line of sight to the player player hologram continues attacking set to timer value for hologram to step down back to yellow from red after chasing players around return else make hologram lose its previous shader red make hologram step its threat level down red to yellow make hologram stop fighting player for now make hologram stop on the spot look player force hologram to look at player set to timer value for hologram to go back to normal if players keep their distance set to set the threat level back to warned return else make hologram lose its previous shader red make hologram step its threat level down red to yellow make hologram stop fighting player for now make hologram stop on the spot look player force hologram to look at player set to timer value for hologram to go back to normal if players keep their distance set to set the threat level back to warned return else set to set the threat timer to countdown from value established above in set to if hologram is functional on if hologram is at blue threat level if player player if hologram s distance to player is too close then set the timer from yellow to red at half value if player if hologram a has direct line of sight to the player make hologram lose its previous shader blue make hologram turn to next threat level shader yellow cast a spell that handles warned state behaviors stop face player play animations and receive ai packages set to timer value for hologram to go back to normal if players keep their distance set to up the threat level variable for this hologram return player if hologram s distance to player is enough to switch threat level if player if hologram a has direct line of sight to the player make hologram lose its previous shader blue make hologram turn to next threat level shader yellow cast a spell that handles warned state behaviors stop face player play animations and receive ai packages set to timer value for hologram to go back to normal if players keep their distance set to up the threat level variable for this hologram return else if set to if hologram is at yellow threat level if if player if player if hologram a has direct line of sight to the player make hologram lose its previous shader yellow make hologram turn to next threat level shader red get rid of spell effect where we establish hologram behaviors while in alerted state d player hologram attacks set to timer value for hologram to step down back to yellow from red increment a challenge related variable set to up the threat level variable for this hologram return else make hologram lose its previous shader yellow make hologram step its threat level down yellow to blue player make hologram stop looking at player make hologram reset its ai so that it continues its patrols alternatively add packages through terminals etc set to set the threat level back to normal return else make hologram lose its previous shader yellow make hologram step its threat level down yellow to blue player make hologram stop looking at player make hologram reset its ai so that it continues its patrols alternatively add packages through terminals etc set to set the threat level back to normal return else set to set the threat timer to countdown from value established above in if player player if hologram s distance to player is too close despite timer if player if hologram a has direct line of sight to the player make hologram lose its previous shader yellow make hologram turn to next threat level shader red get rid of spell effect where we establish hologram behaviors while in alerted state d player hologram attacks set to timer value for hologram to step down back to yellow from red increment a challenge related variable set to up the threat level variable for this hologram return else if set to if if player if player if hologram a has direct line of sight to the player player hologram continues attacking set to timer value for hologram to step down back to yellow from red after chasing players around return else make hologram lose its previous shader red make hologram step its threat level down red to yellow make hologram stop fighting player for now make hologram stop on the spot look player force hologram to look at player set to timer value for hologram to go back to normal if players keep their distance set to set the threat level back to warned return else make hologram lose its previous shader red make hologram step its threat level down red to yellow make hologram stop fighting player for now make hologram stop on the spot look player force hologram to look at player set to timer value for hologram to go back to normal if players keep their distance set to set the threat level back to warned return else set to set the threat timer to countdown from value established above in if set to end finish code
script int do once variable to ensure ghost only given one set of gear int toggle variable to stop resurrection after limb destruction float timer begin give ghost his gear when first encountered if ll tier set to end begin reserved for burning weapon special effects end begin optional command to set level to after first death this will cause sneak detection to drop like a rock if used end begin controller variable to lock out resurrection and regeneration if set timer to timer check to see if a limb is destroyed if so stop resurrection if set to if ghost isn t dead keep regenerating health health timer health set timer to if ghost is dead continue timer until time to resurrect if timer set timer to end
the script addresses the same goals of the previous test script it s just simpler and saves processing cycles jorge alive dead semi dead float begin code name of the items to give set to end begin added pre for when players cripple members of downed ghost people if limb gone set to else if blocks recognize if the creature is already dead they run right after damage takes place it properly assigns values set to set to do stuff for when hit and not crippled limb intact end begin this is necessary because kills do not run blocks if set to dead for good else set to set to do stuff for when dead and not crippled semi dead end if dead then ignore any other statements to save processing cycles return else if set to do more stuff like randomize ai packages idle animations etc else set to end finish code
begin player if disable end
checks whether elijah s instructions have been given short counter to track how many times dean has chatted up dog short counter to track how many times god has chatted up dean short counter to track how many times dean has chatted up christine short counter to track how many times god has chatted up christine short tracks whether a companion is near the fountain short dean fountain block begin set to end set to end dean fountain block end christine fountain block begin set to end set to end christine fountain block end dog fountain block begin set to end set to end dog fountain block end begin player elijah says stuff to the player if saa player set to if allow companion banter if set to if dean and dog are at the fountain dog personality in control if set to if set to set to set to set to set to set to set to set to set to dean and dog are at the fountain god personality in control if set to if set to set to set to set to set to set to dean and christine are at the fountain if set to if set to set to set to set to set to set to set to set to set to christine and god are at the fountain god personality in control if set to if set to set to set to set to set to set to end
script companion is manning his her gala position for the immediate future short determines whether or not the companion can be asked to do his her gala thing short controls whether companions can talk to each other at the fountain short chatting not enabled chatting enabled chatting begun determines whether player is in the bell tower bonce short timer to delay the two fireworks shows if it then the display has gone off already float christine gala variables short christine not in elevator in elevator short not unlocked unlocked dog gala variables short player is not bringing dog food player is bringing dog food short christine is not locked in with dog christine is locked in with dog short dean is not locked in with dog dean is locked in with dog dean gala variables short player has not given dean a player armed dean short dean has not been trapped dean is stuck on the roof bonce added ambient radio audio cue to change music player disable disables the old ghost people disable disable disable disable disable disable disable disable disable disable disable disable disables triggers for old ghost people disable disable disable disable disable disable disables the ghosts that enter when the player reaches the balcony level disable enable enables the first set of the gala gauntlet ghosts triggers enable leaving out and for performance enable enable enable enable enable enables and activates the speakers for the gala gauntlet activate player activate player activate player activate player activate player set to enables and activates the speakers for the gala gauntlet set to set to set to set to idle idle idle idle idle enable enables temp ghosts entering the bell tower area enable enable set bonce to if a if player player player gala gala player player player set to end
limb damage dummy effect
christine wait trigger
theater key trigger
follower ghost bark trigger
suites no sleep trigger