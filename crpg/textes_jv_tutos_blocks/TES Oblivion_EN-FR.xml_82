script float timer short triggered short stage short begin if player if timer lt amp amp triggered set timer to set triggered to set stage to forward else message the fountain needs time to replenish its energies end begin if triggered this section will choose the trap spell based on the pc s level hopefully if player lt set to player gt amp amp player lt set to player gt amp amp player lt set to player gt set to if stage amp amp timer gt debug message message rank f fireball if cast player cast player cast player cast player set stage to if triggered amp amp timer lt set triggered to if timer gt set timer to timer end
short float timer begin have the player after he s talked to christophe if mg restore if mg restore lt set mg restore to if mg restore if player if player set mg restore to when player is close enough to on the road she if mg restore if player mg lt player set mg restore to if player should happen to leave before she manages to force greet check for passage of time and again if mg restore if if timer gt if player lt set timer to player else set timer to timer start combat when variable is set in dialogue results if player aggression player set to if mg restore gt if set mg restore to if player leaves encounter for any reason start combat on him again when he returns if gt if if player lt player end update quest journal when is dead begin if mg restore mg restore end
short test short begin talks to adrienne when he returns and both are in the cell if mg destruct gt if mg destruct if player if if if if test set test to mg if test set test to mg if test set test to if player if if set mg destruct to if test lt if lt if set to set test to mg contingency for player not being in mages guild when conversation runs if player set mg destruct to player set mg destruct to player set mg destruct to end begin further contingency if player is waiting resting when finishes his package to find adrienne if mg destruct gt if mg destruct if player if if if if test set test to mg if test set test to mg if test set test to if if set to if set mg destruct to set to end begin if mg destruct set mg destruct to end
handles scripting for quest mg destruct short short short begin if mg destruct if mg destruct set mg destruct to if store normal health and then crank em up so he won t die set to set to health health set to if the player has followed have him step through the actions necessary to complete this portion of the quest if the player isn t around skip all this and get right to the part where they come back if player if mg destruct if mg lt set mg destruct to if mg destruct if mg destruct set mg destruct to mg destruct if lt if mg destruct conv mg if mg destruct conv if mg destruct lt set mg destruct to restore health and to normal values health else if mg destruct if mg lt set mg destruct to if if mg destruct set mg destruct to end
begin if player set to activate end
begin prevent door from opening and closing during battle if lt gt activate end
short begin if player if player tg amp amp tg player tg tg tg tg else activate else activate end begin if tg amp amp if player if player set to if tg amp amp set to end
begin tg tg end begin if tg amp amp tg if set tg to end
mg this script is responsible for timers involved in quest mg short short short used to check if the player is trying to cheat the system short update float float float begin when var equals and chest is activated initialize variables and increment quest var if mg alchemy set mg alchemy to set mg alchemy to set mg alchemy to set mg alchemy to set mg alchemy update to activate else activate end begin when var equals check for ingredients in the chest and duplicate if at least one day and less than have passed otherwise wipe contents of chest completely if mg alchemy if mg alchemy gt amp amp mg alchemy lt if apple gt apple set to if beef gt beef set to if blackberry gt blackberry set to if gt carrot set to if carrot gt carrot set to if gt set to if corn gt corn set to if flour gt flour set to if grapes gt grapes set to if ham gt ham set to if leek gt leek set to if lettuce gt lettuce set to if onion gt onion set to if pear gt pear set to if pumpkin gt pumpkin set to if radish gt radish set to if rice gt rice set to if strawberry gt strawberry set to if gt set to if gt set to if tobacco gt tobacco set to if tomato gt tomato set to if watermelon gt watermelon set to if gt set to flora ingredients start here if gt set to if gt set to if arrowroot gt arrowroot set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if flaxseeds gt flaxseeds set to if gt set to if garlic gt garlic set to if gt set to if ginseng gt ginseng set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if nightshade gt nightshade set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to creature ingredients start here if gt set to if gt set to if gt set to if crabmeat gt crabmeat set to if gt set to if gt set to if gt set to if gt set to if gt set to if ectoplasm gt ectoplasm set to if gt set to if gt set to if gt set to if gt set to if gt set to if gt set to if mutton gt mutton set to if gt set to if gt set to if scales gt scales set to if gt set to if gt set to if gt set to if venison gt venison set to if gt set to if gt set to if gt set to if gt set to if mg gt mg set to if mg gt mg set to activate if gt set mg alchemy to set mg alchemy update to set to set mg alchemy to set mg alchemy to if mg alchemy after seven days have passed pull everything out of the chest regardless of if mg alchemy gt set mg alchemy to set mg alchemy update to set to set mg alchemy to end
short mg short short timer short short mg begin if mg set to set mg to mg if timer lt if set to set timer to timer else mg helm mg amulet set mg to if mg set to set mg to mg if timer lt if set to set timer to timer else mg plot set mg to script s death upon being given quest mg if mg if mg cast mg enable set to end begin player if tg misdirection gt amp amp tg misdirection lt set tg misdirection to tg misdirection tg end
float timer short activated short stage float float float float short ref ref myself begin if activated set timer to set activated to end begin if activated if stage amp amp timer gt set to set to set to set to set to forward set stage to set to set myself to stage amp amp timer lt set to set to set to set to set to stage amp amp timer lt backward activate myself set stage to set up the damage values set to set to set to set to set to check if animation is done playing if stage amp amp set stage to set activated to if timer gt set timer to timer end begin reset puts animations and stuff back in place set timer to whatever state variables should go back to set activated to initial values set stage to set to set to set to set to end
script short float timer begin player if timer lt cast player set timer to this section will choose the trap spell based on the pc s speed set to player speed if gt cast player gt cast player gt cast player gt cast player else cast player end begin if timer gt set timer to timer end
barrier script self activated no trigger required short activated float float float short begin if activated set up the damage values set to set to set to set to set activated to end
barrier script self activated no trigger required short activated float float float short begin if activated set up the damage values set to set to set to set to set activated to end
dark short short short short short short short short short begin if dark sanctuary set to end
short begin if tg boots if player tg boots if tg boots if player tg boots end begin if player acrobatics if set to end
begin if tg arrow if player tg arrow if tg arrow if player tg arrow end
tg begin if tg blind gt amp amp tg blind lt if player lt tg blind end begin activate if player amp amp tg blind gt tg blind end
short short float float float timer float begin if gt amp amp lt end begin if tg blind if player tg blind if tg blind if player tg blind if if player player set to else set to if player has weapon equipped at the beginning don t even start combat player if player pulls out weapon during combat stop and if player player set to health set to health set to set timer to player if player has done enough damage stop combat and if health lt set to set to health set to health player set timer to player if player isn t doing enough damage stop after certain amount of time has elapsed if timer lt set timer to timer else player set to health set to health set to set timer to player end
short short short begin if tg lex if tg lex if set to set to set to else if if gt set tg lex to end