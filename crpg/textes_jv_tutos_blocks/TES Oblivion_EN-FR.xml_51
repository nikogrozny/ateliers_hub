se begin end begin player se player se end begin player you are unable to wield the ghostly dagger player se end
se begin se make it ghostly end begin player se doll se disable end
se script actors se quest giver se soldier that is obsessed with his doll betrothed se archer that has no arrows se healer with stunted se armory warden that won t give out weapons se fanatic is handled by se fanatic is handled by se fanatic is handled by the soldier amp se fanatic boss is handled by the player wearing count s helmet objects used by scripts se in script starts scene when pc gets near x marker se doll in se in se in se in in locked if pc angers count short none dagger stones short not started begin staged scene close scene short increments for each fanatic that is done all done short increment for each attacker dead short increment for each attacker dead short increment for each attacker dead short dead short fanatic dead dead or exited cell short fanatic dead dead or exited cell short fanatic dead dead or exited cell short fanatic dead dead or exited cell short fanatic dead dead or exited cell short fanatic dead dead or exited cell short fanatic dead dead or exited cell short fanatic dead dead or exited cell short defender dead dead or exited cell short defender dead dead or exited cell short defender dead dead or exited cell short defender dead dead or exited cell short used to force a delay after all the fanatics are done delay will be on of quest script as set by short set when hit s pc with dagger of absorb short set when one of the fanatic s pulls the level that opens the gates short number of original fanatics defeated short shout controls which conversation line gets said short pc is rude to count so locks the door and doesn t tell him the tale short flag for when pc is in the bailey set in door scripts and tested in scripts to reset the scene properly float makes the script run more frequently than every seconds begin if se se disable se c disable se c disable se c disable if player amp amp player se disable se disable se if amp amp if first time around just load the defenders set to place the actors se se se if se se se else se se se se ref se se ref if se se se else se se set se to se se defender ref se defender start se defender ref se defender ref say se shout a random combat line se defender ref se defender start se defender ref se defender ref se defender start se defender ref se defender ref se defender start se defender ref safety net to make sure all actors are resurrected if se se resurrect if se ref se ref resurrect if se se resurrect if se se resurrect put weapons in their hands se se ref se if se se se defender ref se defender ref se defender ref se defender ref force the idle animations se se se se ref set to else safety net actors weren t being moved away in time in some cases if se se gt se se if se se gt se se if se se gt se se if se ref se gt se ref se if se defender ref se defender start gt se defender ref se defender start if se defender ref se defender start gt se defender ref se defender start if se defender ref se defender start gt se defender ref se defender start if se defender ref se defender start gt se defender ref se defender start se defender ref se defender ref se defender ref se defender ref second time through load the bad guys se fanatic ref se fanatic start se fanatic ref se fanatic ref se fanatic start se fanatic ref se fanatic ref se fanatic start se fanatic ref se fanatic se fanatic start se fanatic ref if se se fanatic saa se defender ref say se defender shouts a random combat line add the packages if se flees se se se fanatic ref se se fanatic ref se set se fanatic ref to set se fanatic ref to se fanatic ref se set se fanatic ref to se fanatic se set se fanatic to se fanatic ref se fanatic ref se fanatic ref set for the next scene set to set to if amp amp se defender ref say se shout a random combat line lever has been pulled to let in the extra fanatics se fanatic ref se fanatic start se fanatic ref se fanatic start se fanatic ref se fanatic start se fanatic ref se fanatic start se fanatic ref se travel se fanatic ref se travel se fanatic ref se travel se fanatic ref se travel set se fanatic ref to set se fanatic ref to set se fanatic ref to set se fanatic ref to set to if fanatic dead amp amp fanatic dead amp amp fanatic dead amp amp fanatic dead when last four exit the bailey restart the scene if se lt set to if set to if player is in bailey restart scene right away set fanatic dead to set fanatic dead to set fanatic dead to set fanatic dead to set fanatic dead to set fanatic dead to set fanatic dead to set fanatic dead to set defender dead to set defender dead to set defender dead to set defender dead to reset story actors move them to the out of view marker resurrect them if necessary set or clear necessary variables force an evaluation of packages if se se gt se se if se se resurrect if se if has been given arrows add them after resurrect se se resurrect resets inventory so arrows need to be readded se se set se to player has solved s puzzle if se se gt se se if se se resurrect if se player has solved puzzle set se to set to if se se gt se se if se se resurrect if se gt set se to allow to cast spell if se player has solved s puzzle set se to set se to set to if se ref se gt se ref se if se ref se ref resurrect if se set se ref to allow fanatic to die set se ref to reset fanatics if se fanatic ref se fanatic away gt se fanatic ref se fanatic away if se fanatic ref se fanatic ref resurrect if se fanatic ref se fanatic away gt se fanatic ref se fanatic away if se fanatic ref se fanatic ref resurrect if se fanatic ref se fanatic away gt se fanatic ref se fanatic away if se fanatic ref se fanatic ref resurrect if se fanatic se fanatic away se fanatic se fanatic away if se fanatic safety net he should never die in this manner se fanatic resurrect reset defenders if se defender ref se defender away gt se defender ref se defender away if se defender ref se defender ref resurrect set se defender ref to if se defender ref se defender away gt se defender ref se defender away if se defender ref se defender ref resurrect if se defender ref se defender away gt se defender ref se defender away if se defender ref se defender ref resurrect set se defender ref to if se defender ref se defender away gt se defender ref se defender away if se defender ref se defender ref resurrect set se defender ref to if se set to play exit animation se look player se look player se look player se look player se ref look player se defender ref look player se defender ref look player se defender ref look player se defender ref look player se se se se se se se se se ref se se defender ref se se defender ref se se defender ref se se defender ref se se fanatic ref se se fanatic ref se se fanatic ref se se fanatic se se se se se se ref se defender ref se defender ref se defender ref se defender ref se fanatic ref se fanatic ref se fanatic ref se fanatic se se se se se ref se defender ref se defender ref se defender ref se defender ref se fanatic ref se fanatic ref se fanatic ref se fanatic se se se se se ref se defender ref se defender ref se defender ref se defender ref set to scenes are all done set the weather for the bailey if se gt amp amp se lt if player se if se lt if player se lt se end
se global this is used to trigger a drop out of combat if his target is outside this range from an global this is used to set how many seconds target needs to be outside the before the gatekeeper stops combat global normal debug with no leash this is used to turn of the leash scripting so that you can test the gatekeeper in a different cell without him dropping out of combat float how many seconds the gatekeeper is outside his leash distance when zero he ends combat short holds the gatekeeper s starting aggression as set up in his ai form in the editor ref used to hold the target of the function short float these are used to have the bone arrows harm the gatekeeper short float set one of the bone arrows begin if set to aggression aggression if set to this should prevent the player from training a low level gatekeeper over the rocks and falling to his death if se gt if if there are multiple versions of the gatekeeper in the world running this script disabled until we figure out which one to spawn for the players level this happens in a different script if if player if player gt amp amp player gt amp amp player gt if lt aggression else set to else not in combat if player lt aggression we want him mean so he will attack the player else aggression make him passive if the player isn t inside his patrol radius gatekeeper knock back effect if blame bruce for having this variable live in quest script this is set by a scripted spell effect cast by the gatekeeper message called set to gatekeeper being harmed by bone arrows if se gt because always uses bone arrows from his previous kills we want to be sure that if the player gets his hands on some before makes him bone arrows from the gatekeeper corpse it doesn t work on the gatekeeper this is so i don t need two sets of bone arrows because always uses bone arrows from his previous kills we want to be sure that if the player gets his hands on some before makes him bone arrows from the gatekeeper corpse it doesn t work on the gatekeeper this is so i don t need two sets of bone arrows if gt if if se gatekeeper se se gatekeeper se se gatekeeper se se gatekeeper se se gatekeeper se se gatekeeper se se gatekeeper se se gatekeeper se set to else the arrow effect has already been applied so start counting down set to else lt if se se se se se se se se set to if gt set to if lt se end begin se aggression end begin if se gt if set to this prevents abuse by standing outside perimeter and shooting him aggression end the visit with gatekeeper scene early if se set to set to end begin if se gt if set to this prevents abuse by standing outside perimeter and shooting him aggression end begin player if se lt if se set se to end begin se if set to end begin se if set to end begin se if set to end begin se if set to end begin se if set to end begin se if set to end begin se if set to end begin se if set to end begin if se lt set to wait for gatekeeper s body to finish settling before popping message se se so if she is near by will perform her inspect the gatekeeper corpse package so he will hang around the gates waiting for you to unlock the door end begin se end begin se end
se script actors dark seducer commander golden saint commander golden saint lieutenant se script on gs warden used to trigger them to unlock the door se script on ds warden used to trigger them to unlock the door objects used by scripts se script sets variable se script on flame which lights player on fire when he walks into it se magic effect script puts shader on player when on fire se script on trigger zones used to set variables int main passage side passage int main passage side passage int player has scouted dark seducer position i e is aware of which passage they are defending set when both and are int used to track conversation stage int player solved this quest in a mania way dementia solution int set by quest stages to the last stage set for middle part helps quest targets work right with multiple paths int how many saints to kill before victory initialized in stage int how many seducers to kill before victory init in stage int count number killed int count number killed float timer timer for speeches float makes the script run more frequently than every seconds short handles opening one of the two gates for the sacellum short short handles moving to the sacellum when flame is ignited short handles s intro speech int set to when gs aggro set to set to when gs aggro set back to begin if timer gt set timer to timer else trigger certain events s speech done if se amp amp se se kaneh s speech done if se amp amp se se try to get saints to progress past the first ambush room in side passage set aggression back if it got set to if se ref aggression se ref aggression se ref aggression se ref aggression set to if se battle gt amp amp se battle lt if pick saints and set aggression to to get them to go se ref aggression se ref aggression se ref aggression se ref aggression se ref se ref se ref se ref set to set timer to trigger conversation between kaneh and if quest is started haven t agreed to help either side yet if se gt amp amp se amp amp se amp amp se amp amp se if player lt amp amp player lt se trigger battle stages if se if main passage attack if amp amp player lt se se battle else side passage attack if amp amp player lt se battle open gates in sacellum if se forward set to if se forward set to end
most of this script is for use with se short used in idle manager conditions float used to store duration of say command and checked in if loop so that they don t overlap short not set consult consulted sam is his imaginary friend this flag is set in dialog topic which has a goodbye and then he consults with his imaginary friend condition variables for se packages short short short short short short short unset follow wait begin if he is following the player make him assume sneak mode with the player if se se if if player else else if if if set to set to set to says something about the the gate to the garden courtyard being locked if se if se if se lt if lt set to player se set to pad some pause between repeated says else set to end begin se say se se set to end begin se se put him in a faction that likes the player so he will fight the gatekeeper with the player end se begin se se take him out of the like the player faction end se begin se se put him in a faction that likes the player so he will fight the gatekeeper with the player end se begin se se take him out of the like the player faction end
se actors runs the talking about orcs scene ends the talking about orcs scene if attacked by player package handling wait follow toggle and dialog handling runs the spying on gatekeeper and sorceress scene also has scripting for se scripted for leash behavior to allow player a chance to run away and adds the keys on death and sets stage se runs the orc attack on the gatekeeper scene se on death of orc adventurers trigger the spectators to say something objects se the spell effect that hurts the gatekeeper obsolete se when player adds this it sets quest stage se sets stage when you pick up both keys meta stages and meta active quest help me conditionalize dialog and quest in overlapping branches short this holds a value of the current quest stage for the arrows branch set by results fields in se stages short this holds a value of the current quest stage for the tears branch set by results fields in se stages short not set or both arrows tears used to turn on and off the branches so only one set qts are up at once short used as condition on package short not set should go watch the orcs get killed by the gatekeeper scene set in and short used as a condition for a i m done talking to you dialog choice i prevent the player from leaving dialog until he has heard all of s secrets about the sorceress short obsolete used as a condition for a i m done talking to you dialog choice i prevent the player from leaving dialog until he has heard all of s secrets about the sorceress short used as as a topic block condition won t display the gardens topic until the player has talked to him about the gatekeeper topic short used to summon after getting keys from gatekeeper short used when giving player power for going through a madness door he only gets one power for the first door he goes thru see gatekeeper there are multiple levels of gatekeeper these are originally disabled in the world near the gates of madness since he needs to process in low so we aren t pulling from a list ref holds the reference to the actual gatekeeper the player will fight short used on quest target conditions to point to each gatekeeper speech short begin if se lt if se amp amp se se if se gt if se lt if player se gt if player se gt player has both se else player has just mania key se player se gt player only has the key to dementia se if se gt if player look player set to set in dialog set variables on to make him disappear as if he was summoned set summoned to set to set to set to if se lt if player se end
this gate is opened elsewhere
activated by linked child activates optionally linked parent after sec delay short activated short open short next short busy short float timer ref myself ref begin if activated set myself to set to set activated to if player if open message this gate is opened elsewhere myself amp amp busy if open backward set open to set next to set timer to set busy to open forward set open to set busy to set busy to end begin if player lt amp amp forward set to daisy chain activation if next amp amp timer lt set next to activate myself if timer gt set timer to timer if amp amp busy set busy to end
begin player if lt end
ms short sets stage on return home begin if if ms gt amp amp player ms lt ms ms set ms to set to end
ms this is to handle a chest in s house to unlock and give ownership properly begin if player amp amp amp amp player ms activate else activate end
begin if if mg motives disable if mg motives enable end
float short activated ref begin player if activated cast player set activated to set to end begin if activated if gt set to if lt set activated to if gt lt enable else disable end
tornado activates linked parent object once any object will activate this arrows objects short triggered ref target ref myself begin if triggered if tornado set target to set myself to target activate myself set triggered to end begin set triggered to end
tsunami activates linked parent object once any object will activate this arrows objects short triggered ref target ref myself begin if triggered if tsunami set target to set myself to target activate myself set triggered to end begin set triggered to end
landslide activates linked parent object once any object will activate this arrows objects short triggered ref target ref myself begin if triggered if landslide set target to set myself to target activate myself set triggered to end begin set triggered to end
eruption activates linked parent object once any object will activate this arrows objects short triggered ref target ref myself begin if triggered if eruption set target to set myself to target activate myself set triggered to end begin set triggered to end
gates activates linked parent object once any object will activate this arrows objects short triggered ref target ref myself begin if triggered if b set target to set myself to target activate myself set triggered to end begin set triggered to end
gate activates linked parent object once any object will activate this arrows objects short triggered ref target ref myself short short begin if triggered if amp amp set target to set myself to target activate myself set to if amp amp set target to set myself to target activate myself set to if amp amp set triggered to end begin set triggered to set to set to end